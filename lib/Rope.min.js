var k=null;
(function(){function n(e,h){return function(){return e.apply(h,arguments)}}var j,m;m=function(){var e;for(e=1;Math.random()>0.7;)e++;return e};module.exports=j=function(e){if(!(this instanceof j))return new j(e);this.d={a:[],c:[]};this.length=0;e!=k&&this.insert(0,e);return this};j.prototype.toString=function(){var e,h;e=this.d;for(h=[];e!=k;)h.push(e.b),e=e.a[0];return h.join("")};j.prototype.insert=function(e,h){var a,b,f,g,c,i,l;if(typeof e!=="number")throw Error("pos must be a number");if(!(0<=
e&&e<=this.length))throw Error("pos must be within the rope ("+this.length+")");if(typeof h!=="string")throw Error("inserted text must be a string");a=this.d;g=Array(this.d.a.length);i=Array(this.d.a.length);c=e;if(a.a.length>0)for(f=l=this.d.a.length-1;l<=0?f<=0:f>=0;l<=0?f+=1:f-=1){for(;c>a.c[f];)c-=a.c[f],a=a.a[f];i[f]=c;g[f]=a}l=function(a){var b,d,e;e=[];b=0;for(d=g.length;0<=d?b<d:b>d;0<=d?b+=1:b-=1)e.push(g[b].c[b]+=a)};if(a.b!=k&&a.b.length+h.length<512)a.b=a.b.slice(0,c)+h+a.b.slice(c),l(h.length),
this.length+=h.length;else{f=n(function(a){var b,d,c;b=m();c={b:a,a:Array(b),c:Array(b)};for(d=0;0<=b?d<b:d>b;0<=b?d+=1:d-=1)d<this.d.a.length?(c.a[d]=g[d].a[d],g[d].a[d]=c,c.c[d]=a.length+g[d].c[d]-i[d],g[d].c[d]=i[d]):(c.a[d]=k,c.c[d]=this.length-e+a.length,this.d.a.push(c),this.d.c.push(e)),g[d]=c,i[d]=a.length;if(b<g.length){d=b;for(c=g.length;b<=c?d<c:d>c;b<=c?d+=1:d-=1)g[d].c[d]+=a.length,i[d]+=a.length}e+=a.length;this.length+=a.length;if(j.e)return this.print()},this);if(a.b!=k&&a.b.length>
c)b=a.b.slice(c),a.b=a.b.slice(0,c),l(-b.length),this.length-=b.length,j.e&&this.print();a=0;for(c=h.length;0<=c?a<c:a>c;a+=512)f(h.slice(a,a+512));b!=k&&f(b)}return this};j.prototype.del=function(e,h){var a,b,f,g,c,i;if(typeof e!=="number")throw Error("pos must be a number");if(!(0<=e&&e<=this.length))throw Error("pos "+e+" must be within the rope ("+this.length+")");if(!(0<=(a=e+h)&&a<=this.length))throw Error("pos "+(e+h)+" must be within the rope ("+this.length+")");a=this.d;f=Array(this.d.a.length);
j.e&&this.print();g=e;if(a.a.length>0)for(b=c=a.a.length-1;c<=0?b<=0:b>=0;c<=0?b+=1:b-=1){for(;g>a.c[b];)g-=a.c[b],a=a.a[b];f[b]=a}for(this.length-=h;h>0;){if(a.b==k||g===a.b.length)a=f[0].a[0],g=0;c=Math.min(h,a.b.length-g);if(c<a.b.length){a.b=a.b.slice(0,g)+a.b.slice(g+c);b=0;for(i=f.length;0<=i?b<i:b>i;0<=i?b+=1:b-=1)b<a.a.length?a.c[b]-=c:f[b].c[b]-=c}else{b=0;for(i=f.length;0<=i?b<i:b>i;0<=i?b+=1:b-=1)b<a.a.length?(f[b].c[b]=f[b].c[b]+a.c[b]-c,f[b].a[b]=a.a[b]):f[b].c[b]-=c;a=a.a[0]}h-=c}return this}}).call(this);